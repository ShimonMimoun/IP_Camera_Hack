import requests
import re
import os
import time
import sys


def ask_country():
    print("""
    \033[1;31m******************************************************************************************************************************
    \033[1;31m******************************************************************************************************************************
    \033[1;31m******************************************************************************************************************************
    \033[1;31m******************************************************************************************************************************
    \033[1;31m****************************************\033[1;37m       Hack IP Camera:                      V1.0.Beta\033[1;31m ********************************
    \033[1;31m****************************************\033[1;37m                       By Shimon Mimoun       \033[1;31m        ********************************
    \033[1;31m****************************************\033[1;37m                                   && Omer Paz\033[1;31m        ********************************
    \033[1;31m******************************************************************************************************************************
    \033[1;31m******************************************************************************************************************************
    \033[1;31m******************************************************************************************************************************
    \033[1;31m******************************************************************************************************************************

    \033[1;37mEnter Number : \n        
    \033[1;37mPRESS 1 --> \033[1;31mUnited States   

    \033[1;37mPRESS 2 --> \033[1;31mFrench                      

    \033[1;37mPRESS 3 --> \033[1;31mIsrael                      

    \033[1;37mPRESS 4 --> \033[1;31mIran
                        
    \033[1;37mPRESS 5 --> \033[1;31mArgentina
    """)
    return int(input("\033[1;37mINPUT : "))

def get_insecam(code_country, nb_page=3000): 
    headers = {
        'User-Agent': 'Mozilla/5.0 (X11; Linux i686; rv:68.0) Gecko/20100101 Firefox/68.0'
    }
    for page in range(0, nb_page):
        url = "https://www.insecam.org/en/bycountry/{0}/?page={1}".format(code_country, page)
        res = requests.get(url, headers=headers)
        findip = re.findall('http://\d+.\d+.\d+.\d+:\d+', res.text)
        count = 0
        for _ in findip:
            hasil = findip[count]
            print("\033[1;32m", hasil)
            count += 1


if __name__ == "__main__":
    user_select = ask_country()
    printcolor = "\n \033[0;37;41mTarget : \033[1;32;40m"

    code_country = {
        1: {"full": "United Stated", "code": "US"},
        2: {"full": "French", "code": "FR"},
        3: {"full": "Israel", "code": "IL"},
        4: {"full": "Iran", "code": "PL"},
        5: {"full": "Argentine", "code": "AR"},
    }

    if user_select in code_country.keys():
        print("{0}\n".format(code_country.get(user_select)["full"]))
        print(printcolor)
        get_insecam(code_country=code_country.get(user_select)["code"])
    else:
        print("Input error!")
